#!/usr/bin/env bash
# Re-encodes a video to H.264 with a chosen CRF for smaller output.
# Usage: shrinkvid <input> <output> [crf]

set -e
set -u
set -o pipefail

ffmpeg -i "$1" -c:v libx264 -tag:v avc1 -movflags faststart -crf "${3:-30}" -preset superfast "$2"